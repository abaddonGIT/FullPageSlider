var FullPageSlider=null;!function(i,e,t,s){"use strict";var n={},o=null,r=i.jQuery||!1;FullPageSlider=function(i){n=this.ext({sliderSelector:null,startSlide:0,next:".next",prev:".prev",itemClass:".item",effectName:"one",animationDelay:13e3,scaleCof:13},i),this.ext(this,{config:n,goodSlides:[],index:0,handlers:{},active:"active",css3:!0}),/MSIE 9/i.test(t.userAgent)&&(this.active="badie",this.css3=!1),this.run=function(){return this.buildSlider()},this.buildSlider=function(){return this.slider=e.querySelector(n.sliderSelector),this.slider?(this.addClass(this.slider,"full-slider"),this.navigateButtons(),this.getAllSlides(),void 0):(this.throwError("error","Указан неправильный селектор контенера!!!"),!1)},this.navigateButtons=function(){this.next=e.querySelector(this.config.next),this.prev=e.querySelector(this.config.prev),this.next&&this.next.addEventListener("click",this.nextSlide,!1),this.prev&&this.prev.addEventListener("click",this.prevSlide,!1)},this.getAllSlides=function(){var i=this.slides=this.slider.querySelectorAll(n.itemClass),e=i.length;return e?void this.imgLoad(0,function(){delete this.slides,this.index=n.startSlide,this.emit("load"),this.addAnimationEndEvent()}.bind(this)):void this.throwError("error","Блок не содержит не одного слайда!!!")},this.addAnimationEndEvent=function(){if(this.css3){this.addClass(this.goodSlides[this.index],this.active);for(var i=this.goodSlides.length;i--;){var e=this.goodSlides[i];this.prefixedEvent(e,"AnimationEnd",this.cssAnimation)}}else r?this.ieAnimation():this.throwError("warn","Ваш браузер не поддерживает css3 анимацию и вы забыли подключить jQuery!!!")},this.cssAnimation=function(i){if(i.animationName===n.effectName){var e=o.goodSlides[o.index+1];o.removeClass(o.goodSlides[o.index],o.active),e?o.index++:o.index=0,s(function(){o.addClass(o.goodSlides[o.index],o.active),o.emit("tic")},0)}},this.ieAnimation=function(){this.addClass(this.goodSlides[this.index],this.active),r(this.goodSlides[this.index]).animate({opacity:1},{step:function(i){r(this).css("-ms-transform","scale("+(1+i/n.scaleCof)+")")},done:function(){o.removeClass(o.goodSlides[o.index],o.active),r(this).animate({opacity:0},n.animationDelay/2,function(){var i=o.goodSlides[o.index+1];i?o.index++:o.index=0,o.emit("tic"),o.ieAnimation()})},duration:n.animationDelay/2})},this.nextSlide=function(i){o.paginationAction("next"),i.preventDefault()},this.prevSlide=function(i){o.paginationAction("prev"),i.preventDefault()},this.paginationAction=function(i){o.removeClass(o.goodSlides[o.index],o.active);var e,t=o.index;switch(i){case"next":e=o.goodSlides[o.index+1],e?o.index++:o.index=0;break;case"prev":e=o.goodSlides[o.index-1],e?o.index--:o.index=o.goodSlides.length-1}s(function(){o.css3?(o.emit(i,o.index),o.addClass(o.goodSlides[o.index],o.active)):(t?r(o.goodSlides[t]).stop(!0,!1):"",o.ieAnimation())},0)},o=this},FullPageSlider.prototype={imgLoad:function(i,e){if(this.slides[i]){var t,s=this.slides[i].getAttribute("data-image");s&&(t=new Image,t.src=s,t.onload=function(){this.slides[i].style.cssText+="background-image: url("+s+");",this.goodSlides.push(this.slides[i]),i++,o.imgLoad(i,e),t=null}.bind(this),t.onerror=function(){delete this.slides[i],i++,this.throwError("warn","изображение не жожет быть загруженно!!!"),this.imgLoad(i,e),t=null}.bind(this))}else e()},ext:function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i},removeClass:function(i,e){if(i.classList)i.classList.remove(e);else{var t=new RegExp("(^|\\s)"+e+"(\\s|$)","g");i.className=i.className.replace(t,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")}},addClass:function(i,e){i.classList?i.classList.add(e):i.className+=" "+e},throwError:function(i,e){switch(i){case"error":console.error(e);break;case"warn":console.warn(e);break;case"log":console.log(e)}},prefixedEvent:function(i,e,t,s){for(var n=["webkit",""],o=0;o<n.length;o++)n[o]||(e=e.toLowerCase()),s?i.removeEventListener(n[o]+e,t,!1):i.addEventListener(n[o]+e,t,!1)},destroy:function(){var i=this.goodSlides.length;if(i)for(;i--;){var e=this.goodSlides[i];this.prefixedEvent(e,"AnimationEnd",this.cssAnimation,!0)}this.next&&this.next.removeEventListener("click",this.nextSlide,!1),this.prev&&this.prev.removeEventListener("click",this.prevSlide,!1),o=null},on:function(i,e){this.handlers[i]=e},emit:function(){var i=this.handlers[arguments[0]];i&&this.handlers[arguments[0]].apply(this,arguments)}}}(window,document,navigator,setTimeout);