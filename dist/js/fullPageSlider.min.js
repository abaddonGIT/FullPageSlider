var FullPageSlider=null;!function(i,e,t){"use strict";var s={},n=null;FullPageSlider=function(i){s=this.ext({sliderSelector:null,startSlide:0,next:".next",prev:".prev",itemClass:".item"},i),this.ext(this,{config:s,goodSlides:[],index:0,handlers:{},active:"active"}),/MSIE 9/i.test(t.userAgent)&&(this.active="badie"),this.buildSlider=function(){return this.slider=e.querySelector(s.sliderSelector),this.slider?(this.addClass(this.slider,"full-slider"),e.querySelector(this.config.next).addEventListener("click",this.nextSlide,!1),e.querySelector(this.config.prev).addEventListener("click",this.prevSlide,!1),this.getAllSlides(),void 0):void this.throwError("error","Указан неправильный селектор контенера!!!")},this.getAllSlides=function(){var i=this.slides=this.slider.querySelectorAll(s.itemClass),e=i.length;return e?void this.imgLoad(0,function(){delete this.slides,this.index=s.startSlide,this.emit("load"),this.addClass(this.goodSlides[this.index],this.active),this.addAnimationEndEvent()}.bind(this)):void this.throwError("error","Блок не содержит не одного слайда!!!")},this.addAnimationEndEvent=function(){for(var i=this.goodSlides.length;i--;){var e=this.goodSlides[i];this.prefixedEvent(e,"AnimationEnd",function(){var i=this.goodSlides[this.index+1];this.removeClass(this.goodSlides[this.index],this.active),i?this.index++:this.index=0,this.addClass(this.goodSlides[this.index],this.active)}.bind(this))}},this.nextSlide=function(i){n.paginationAction("next"),i.preventDefault()},this.prevSlide=function(i){n.paginationAction("prev"),i.preventDefault()},this.paginationAction=function(i){n.removeClass(n.goodSlides[n.index],n.active);var e;switch(i){case"next":e=n.goodSlides[n.index+1],e?n.index++:n.index=0;break;case"prev":e=n.goodSlides[n.index-1],e?n.index--:n.index=n.goodSlides.length-1}n.emit(i,n.index),n.addClass(n.goodSlides[n.index],n.active)},this.buildSlider(),n=this},FullPageSlider.prototype={imgLoad:function(i,e){if(this.slides[i]){var t,s=this.slides[i].getAttribute("data-image");s&&(t=new Image,t.src=s,t.onload=function(){this.slides[i].style.cssText+="background-image: url("+s+");",this.goodSlides.push(this.slides[i]),i++,n.imgLoad(i,e),t=null}.bind(this),t.onerror=function(){delete this.slides[i],i++,this.throwError("warn","изображение не жожет быть загруженно!!!"),this.imgLoad(i,e),t=null}.bind(this))}else e()},ext:function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i},removeClass:function(i,e){if(i.classList)i.classList.remove(e);else{var t=new RegExp("(^|\\s)"+e+"(\\s|$)","g");i.className=i.className.replace(t,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")}},addClass:function(i,e){i.classList?i.classList.add(e):i.className+=" "+e},throwError:function(i,e){switch(i){case"error":console.error(e);break;case"warn":console.warn(e);break;case"log":console.log(e)}},prefixedEvent:function(i,e,t){for(var s=["webkit",""],n=0;n<s.length;n++)s[n]||(e=e.toLowerCase()),i.addEventListener(s[n]+e,t,!1)},on:function(i,e){this.handlers[i]=e},emit:function(){var i=this.handlers[arguments[0]];i&&this.handlers[arguments[0]].apply(this,arguments)}}}(window,document,navigator);