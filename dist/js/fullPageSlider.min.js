var FullPageSlider=null;!function(e,i,t,s,n){"use strict";var o={},d=null,a=e.jQuery||!1;FullPageSlider=function(e){o=this.ext({sliderSelector:null,startSlide:0,next:".next",prev:".prev",itemClass:".item",effectName:"one",animationDelay:13e3,scaleCof:13},e),this.ext(this,{config:o,goodSlides:[],index:0,handlers:{},active:o.effectName,activeNext:o.effectName+"-next",css3:!0}),n.defineProperty(this,"index",{set:function(e){this.number=e,this.next=this.goodSlides[e+1],this.next||(this.next=this.goodSlides[0]),this.addClass(this.next,this.activeNext)},get:function(){return this.number}}),/MSIE 9/i.test(t.userAgent)&&(this.active="badie",this.css3=!1),this.run=function(){return this.buildSlider()},this.buildSlider=function(){return this.slider=i.querySelector(o.sliderSelector),this.slider?(this.addClass(this.slider,"full-slider"),this.navigateButtons(),this.getAllSlides(),void 0):(this.throwError("error","Указан неправильный селектор контенера!!!"),!1)},this.navigateButtons=function(){this.next=i.querySelector(this.config.next),this.prev=i.querySelector(this.config.prev),this.next&&this.next.addEventListener("click",this.nextSlide,!1),this.prev&&this.prev.addEventListener("click",this.prevSlide,!1)},this.getAllSlides=function(){var e=this.slides=this.slider.querySelectorAll(o.itemClass),i=e.length;return i?void this.imgLoad(0,function(){delete this.slides,this.index=o.startSlide,this.emit("load"),this.addAnimationEndEvent()}.bind(this)):void this.throwError("error","Блок не содержит не одного слайда!!!")},this.addAnimationEndEvent=function(){if(this.css3){this.addClass(this.goodSlides[this.index],this.active);for(var e=this.goodSlides.length;e--;){var i=this.goodSlides[e];this.prefixedEvent(i,"AnimationEnd",this.cssAnimationEnd)}}else a?this.ieAnimation():this.throwError("warn","Ваш браузер не поддерживает css3 анимацию и вы забыли подключить jQuery!!!")},this.cssAnimationEnd=function(e){if(e.animationName===o.effectName){var i=d.goodSlides[d.index+1];d.removeClass(d.goodSlides[d.index],d.active),i?d.index++:d.index=0,s(function(){d.addClass(d.goodSlides[d.index],d.active),d.removeClass(d.goodSlides[d.index],d.activeNext),d.emit("tic")},0)}},this.ieAnimation=function(){this.addClass(this.goodSlides[this.index],this.active),a(this.goodSlides[this.index]).animate({opacity:1},{step:function(e){a(this).css("-ms-transform","scale("+(1+e/o.scaleCof)+")")},done:function(){d.removeClass(d.goodSlides[d.index],d.active),a(this).animate({opacity:0},o.animationDelay/2,function(){var e=d.goodSlides[d.index+1];e?d.index++:d.index=0,d.removeClass(d.goodSlides[d.index],d.activeNext),d.emit("tic"),d.ieAnimation()})},duration:o.animationDelay/2})},this.nextSlide=function(e){d.paginationAction("next"),e.preventDefault()},this.prevSlide=function(e){d.paginationAction("prev"),e.preventDefault()},this.paginationAction=function(e){d.removeClass(d.goodSlides[d.index],d.active);var i,t=d.index;switch(e){case"next":i=d.goodSlides[d.index+1],i?d.index++:d.index=0;break;case"prev":i=d.goodSlides[d.index-1],i?d.index--:d.index=d.goodSlides.length-1}s(function(){d.css3?(d.emit(e,d.index),d.addClass(d.goodSlides[d.index],d.active)):(t?a(d.goodSlides[t]).stop(!0,!1):"",d.ieAnimation()),d.removeClass(d.goodSlides[d.index],d.activeNext)},0)},d=this},FullPageSlider.prototype={imgLoad:function(e,i){if(this.slides[e]){var t,s=this.slides[e].getAttribute("data-image");s&&(t=new Image,t.src=s,t.onload=function(){this.slides[e].style.cssText+="background-image: url("+s+");",this.goodSlides.push(this.slides[e]),e++,d.imgLoad(e,i),t=null}.bind(this),t.onerror=function(){delete this.slides[e],e++,this.throwError("warn","изображение не жожет быть загруженно!!!"),this.imgLoad(e,i),t=null}.bind(this))}else i()},ext:function(e,i){for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t]);return e},removeClass:function(e,i){if(e.classList)e.classList.remove(i);else{var t=new RegExp("(^|\\s)"+i+"(\\s|$)","g");e.className=e.className.replace(t,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")}},addClass:function(e,i){e.classList?e.classList.add(i):e.className+=" "+i},throwError:function(e,i){switch(e){case"error":console.error(i);break;case"warn":console.warn(i);break;case"log":console.log(i)}},prefixedEvent:function(e,i,t,s){for(var n=["webkit",""],o=0;o<n.length;o++)n[o]||(i=i.toLowerCase()),s?e.removeEventListener(n[o]+i,t,!1):e.addEventListener(n[o]+i,t,!1)},destroy:function(){var e=this.goodSlides.length;if(e)for(;e--;){var i=this.goodSlides[e];this.prefixedEvent(i,"AnimationEnd",this.cssAnimation,!0)}this.next&&this.next.removeEventListener("click",this.nextSlide,!1),this.prev&&this.prev.removeEventListener("click",this.prevSlide,!1),d=null},on:function(e,i){this.handlers[e]=i},emit:function(){var e=this.handlers[arguments[0]];e&&this.handlers[arguments[0]].apply(this,arguments)}}}(window,document,navigator,setTimeout,Object);